---
/**
 * Input - Leafy Lab
 * Clean, rounded, organic feel
 */
interface Props {
	type?: "text" | "email" | "password" | "tel" | "url" | "number";
	name: string;
	label?: string;
	placeholder?: string;
	required?: boolean;
	disabled?: boolean;
	value?: string;
	error?: string;
	class?: string;
}

const {
	type = "text",
	name,
	label,
	placeholder,
	required = false,
	disabled = false,
	value = "",
	error,
	class: className = "",
} = Astro.props;

const inputId = `input-${name}`;

const inputClasses = `w-full px-6 py-4 font-sans text-base text-leafy-brown bg-white border rounded-2xl transition-all duration-300 placeholder:text-leafy-brown/40 focus:outline-none focus:border-leafy-green focus:ring-2 focus:ring-leafy-green/20 disabled:opacity-60 disabled:cursor-not-allowed ${error ? "border-red-500 focus:border-red-500 focus:ring-red-500/20" : "border-leafy-sage/20"}`;
---

<div class:list={["flex flex-col gap-2", className]}>
	{
		label && (
			<label
				for={inputId}
				class="text-sm font-bold text-leafy-green ml-2"
			>
				{label}
				{required && (
					<span class="text-leafy-accent ml-1" aria-hidden="true">
						*
					</span>
				)}
			</label>
		)
	}
	<input
		type={type}
		id={inputId}
		name={name}
		placeholder={placeholder}
		required={required}
		disabled={disabled}
		value={value}
		class={inputClasses}
		aria-invalid={error ? "true" : undefined}
		aria-describedby={error ? `${inputId}-error` : undefined}
	/>
	{
		error && (
			<p
				id={`${inputId}-error`}
				class="text-sm text-red-500 ml-2"
				role="alert"
			>
				{error}
			</p>
		)
	}
</div>
